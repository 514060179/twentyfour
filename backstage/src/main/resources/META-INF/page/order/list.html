<!DOCTYPE html>
<!-- 
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.0
Version: 1.5.2
Author: KeenThemes
Website: http://www.keenthemes.com/
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
-->
<!--[if IE 8]>
<html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en" class="no-js"> <!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
    <meta charset="utf-8"/>
    <title>24占|twentyfour</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <meta name="MobileOptimized" content="320">
    <style type="text/css">
    	table td,table th {text-align: center;vertical-align: middle!important;}
    </style>

</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<body class="page-header-fixed">
<!-- head 头 -->
<#include "../common/head.html"/>
<!-- END HEADER -->
<!-- BEGIN CONTAINER -->
<div class="page-container">
    <!-- 菜单 -->
    <#include "/ftl/menu.ftl"/>
    <!-- END SIDEBAR -->
    <!-- BEGIN PAGE -->
    <div class="page-content">
        <!-- BEGIN PAGE HEADER-->
        <div class="row">
            <div class="col-md-12">
                <!-- BEGIN PAGE TITLE & BREADCRUMB-->

                <ul class="page-breadcrumb breadcrumb">

                    <li>
                        <i class="icon-home"></i>
                        <a href="index.html">首頁</a>
                        <i class="icon-angle-right"></i>
                    </li>
                    <li>
                        <a href="#">订单管理</a>
                        <i class="icon-angle-right"></i>
                    </li>
                </ul>
                <!-- END PAGE TITLE & BREADCRUMB-->
            </div>
        </div>
        <!-- END PAGE HEADER-->
        <!-- BEGIN PAGE CONTENT-->
        <div class="row">
            <div class="col-md-12">
            </div>
        </div>
        <!-- END PAGE CONTENT-->

        <div class="row">
            <div class="col-md-12">
                <!-- BEGIN EXAMPLE TABLE PORTLET-->

                <!-- END EXAMPLE TABLE PORTLET-->
                <!-- BEGIN EXAMPLE TABLE PORTLET-->
                <div class="portlet box #fff">
                    <div class="portlet-title">
                        <div class="caption" style="color: black"><i class="icon-globe"></i>订单列表</div>
                        <div class="actions">
                            <div class="btn-group">
                                <a class="btn default" href="#" data-toggle="dropdown">
                                    更多
                                    <i class="icon-angle-down"></i>
                                </a>
                                <div id="sample_2_column_toggler"
                                     class="dropdown-menu hold-on-click dropdown-checkboxes pull-right">
                                    <label>
                                        <div class="checker"><span class="checked"><input type="checkbox" checked=""
                                                                                          data-column="0"></span></div>
                                        导出</label>
                                    <label>
                                        <div class="checker"><span class="checked"><input type="checkbox" checked=""
                                                                                          data-column="0"><a href="javascript:void(0)"></span></div>
                                        新增<a/></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="sample_2_wrapper" class="dataTables_wrapper form-inline" role="grid">
                            <div class="row form-horizontal">
                              <form action="" method="post" id="form1">
	                              	<div class="col-md-3 col-sm-12">
	                              		<div>
	                              			<label>订单&nbsp;&nbsp;ID&nbsp;&nbsp;:
	                              				<input  id="orderId" name="orderId" type="text" class="form-control input-small"  value="<#escape x as x?xml>${order.orderId!}</#escape>" onkeyup="value=value.replace(/[^\d]/g,'')"/>
	                              			</label>
	                              		</div>
	                              	</div>
	                              	<div class="col-md-3 col-sm-12">
	                              		<div>
	                              			<label>用户名字:
	                              				<input  id="userId" name="userName" type="text" class="form-control input-small"  value="<#if order.tfUser??><#escape x as x?xml>${order.tfUser.uNick!}</#escape></#if>" />
	                              			</label>
	                              		</div>
	                              	</div>
                                    <div class="col-md-3 col-sm-12" style="width:382px;height:39px;">
                                          <label>大师名字:
                                              <input  id="masterId" name="masterName" type="text" class="form-control input-small"  value="<#if order.tfMaster??><#escape x as x?xml>${order.tfMaster.mNick!}</#escape></#if>" />
                                          </label>
                                    </div>
	                              	<div class="col-md-3 col-sm-12">
	                              		<div>
	                              			<label>订单编号:
	                              				<input  id="orderNo" name="orderNo" type="text" class="form-control input-small"  value="<#escape x as x?xml>${order.oOrderNo!}</#escape>" onkeyup="value=value.replace(/[^\d]/g,'')"/>
	                              			</label>
	                              		</div>
	                              	</div>
	                              	<div class="col-md-3 col-sm-12">
	                              		<div>
	                              			<label>订单类型:
	                              				<select id="type" name="type" class="form-control input-small">
	                              					<option value="">全部</option>
	                              					<option value="1" <#if order.oOrderType??><#if order.oOrderType=1>selected</#if></#if>>占卜</option>
	                              					<option value="3" <#if order.oOrderType??><#if order.oOrderType=3>selected</#if></#if>>商品</option>
	                              				</select>
	                              			</label>
	                              		</div>
	                              	</div>
	                              	<div class="col-md-3 col-sm-12">
	                              		<div>
	                              			<label>支付方式:
	                              				<select id="payWay" name="payWay" class="form-control input-small">
	                              					<option value="">全部</option>
	                              					<option value="1" <#if order.oPayWay??><#if order.oPayWay=1>selected</#if></#if>>微信支付</option>
	                              					<option value="2" <#if order.oPayWay??><#if order.oPayWay=2>selected</#if></#if>>支付宝</option>
	                              				</select>
	                              			</label>
	                              		</div>
	                              	</div>
	                                <div class="col-md-3 col-sm-12">
	                              		<div>
	                              			<label>订单状态:
	                              				<select id="orderStatus" name="orderStatus" class="form-control input-small">
	                              					<option value="">全部</option>
	                              					<option value="1" <#if order.oStatus??><#if order.oStatus=1>selected</#if></#if>>未支付</option>
	                              					<option value="2" <#if order.oStatus??><#if order.oStatus=2>selected</#if></#if>>已支付</option>
	                              					<option value="3" <#if order.oStatus??><#if order.oStatus=3>selected</#if></#if>>已确定</option>
	                              					<option value="4" <#if order.oStatus??><#if order.oStatus=4>selected</#if></#if>>进行中</option>
	                              					<option value="5" <#if order.oStatus??><#if order.oStatus=5>selected</#if></#if>>已完成</option>
	                              					<option value="998" <#if order.oStatus??><#if order.oStatus=998>selected</#if></#if>>退款</option>
	                              					<option value="999" <#if order.oStatus??><#if order.oStatus=999>selected</#if></#if>>已取消</option>
	                              				</select>
	                              			</label>
	                              		</div>
	                              	</div>
	                                <div class="col-md-3 col-sm-12">
	                                    <a href="javascript:void(0)" onclick="searchs()" class="btn default"><i class="icon-search"></i></a>
	                                </div>
								</form>
                            </div>
                            <div class="table-scrollable">
                                <table class="table table-striped table-bordered table-hover table-full-width dataTable"
                                       id="sample_2" aria-describedby="sample_2_info">
                                    <thead>
                                    <tr role="row">
                                        <th class="sorting" role="columnheader" tabindex="0" aria-controls="sample_2"
                                            rowspan="1" colspan="1"
                                            aria-label="Rendering engine: activate to sort column ascending"
                                            style="width: 3%;word-break: break-all;">订单ID
                                        </th>
                                        <th class="sorting_asc" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1" aria-sort="ascending"
                                            aria-label="Browser: activate to sort column descending"
                                            style="width: 15%;word-break: break-all;">订单编号
                                        </th>
                                        <th class="hidden-xs sorting" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1"
                                            aria-label="Platform(s): activate to sort column ascending"
                                            style="width: 3%;word-break: break-all;">用户名字
                                        </th>
                                        <th class="hidden-xs sorting" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1"
                                            aria-label="Platform(s): activate to sort column ascending"
                                            style="width: 3%;word-break: break-all;">大师名字
                                        </th>
                                        <th class="hidden-xs sorting" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1"
                                            aria-label="Platform(s): activate to sort column ascending"
                                            style="width: 3%;word-break: break-all;">订单类型
                                        </th>
                                        <th class="hidden-xs sorting" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1"
                                            aria-label="Platform(s): activate to sort column ascending"
                                            style="width: 3%;word-break: break-all;">商品p/业务b
                                        </th>
                                        <th class="hidden-xs sorting" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1"
                                            aria-label="Platform(s): activate to sort column ascending"
                                            style="width: 5%;word-break: break-all;">订单状态
                                        </th>
                                        <th class="hidden-xs sorting" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1"
                                            aria-label="Platform(s): activate to sort column ascending"
                                            style="width: 5%;word-break: break-all;">支付方式
                                        </th>
                                        <th class="hidden-xs sorting" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1"
                                            aria-label="Platform(s): activate to sort column ascending"
                                            style="width: 10%;word-break: break-all;">创建时间
                                        </th> 
<!--                                         <th class="hidden-xs sorting" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1"
                                            aria-label="Engine version: activate to sort column ascending"
                                            style="width: 10%;word-break: break-all;">更新时间
                                        </th> -->
                                        <th class="hidden-xs sorting" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1"
                                            aria-label="Engine version: activate to sort column ascending"
                                            style="width: 10%;word-break: break-all;">完成时间
                                        </th>
                                        <th class="hidden-xs sorting" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1"
                                            aria-label="Engine version: activate to sort column ascending"
                                            style="width: 5%;word-break: break-all;">总订单编号
                                        </th>
                                        <th class="hidden-xs sorting" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1"
                                            aria-label="Engine version: activate to sort column ascending"
                                            style="width: 5%;word-break: break-all;">总价
                                        </th>
                                         <th class="hidden-xs sorting" role="columnheader" tabindex="0"
                                            aria-controls="sample_2" rowspan="1" colspan="1"
                                            aria-label="Engine version: activate to sort column ascending"
                                            style="width: 10%;word-break: break-all;">更多操作
                                        </th>
                                    </tr>
                                    </thead>

                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                     <#list page as item>
                                    <tr class="odd" id="${item.orderId!}Tr">
                                        <td class=" " style="width: 3%;word-break: break-all;"><a href="${base!}/admin/order/detail?orderId=${item.orderId!}<#if item.oOrderType??><#if item.oOrderType=3>&type=3</#if></#if>">${item.orderId!}</a></td>
                                        <td class=" " style="width: 10%;word-break: break-all;white-space:normal;">${item.oOrderNo!}</td>
                                        <td class=" " style="width: 3%;word-break: break-all;">${item.tfUser.uNick!}</td>
                                        <td class=" " style="width: 3%;word-break: break-all;">${item.tfMaster.mNick!}</td>
                                        <td class=" " style="width: 3%;word-break: break-all;">
                                        	<#if item.oOrderType??>
                                        		<#if item.oOrderType=1>在线占卜
                                        		<#elseif item.oOrderType=2>到访占卜
                                        		<#else>商品
                                        		</#if>
                                        	</#if>
                                        </td>
                                        <td class=" " style="width: 3%;word-break: break-all;">
                                        	<#if item.oOrderType??>
                                        		<#if item.oOrderType=1 || item.oOrderType=2>${item.tfBusiness.bName!}(b)
                                        		<#elseif item.oOrderType=3>${item.tfProduct.pName!}</#if>(p)
                                        	</#if>
                                        </td>
                                        <td class=" " style="width: 5%;word-break: break-all;">
                                        	<#if item.oStatus??>
                                        		<#if item.oStatus=1>未支付
                                        		<#elseif item.oStatus=2>已支付
                                        		<#elseif item.oStatus=3>已确定
                                        		<#elseif item.oStatus=4>进行中
                                        		<#elseif item.oStatus=5>已完成
                                        		<#elseif item.oStatus=998>退款
                                        		<#elseif item.oStatus=999>已取消
                                        		</#if>
                                        	</#if>
                                        </td>
                                        <td class=" " style="width: 5%;word-break: break-all;">
                                        	<#if item.oPayWay??>
                                        		<#if item.oPayWay=1>微信支付
                                        		<#elseif item.oPayWay=2>支付宝
                                        		</#if>
                                        	</#if>
                                        </td>
                                        <td class=" " style="width: 10%;word-break: break-all;">${(item.oCreateTime?string("yyyy-MM-dd HH:mm:ss"))!}</td>
                                        <!-- <td class=" " style="width: 10%;word-break: break-all;">${(item.oUpdateTime?string("yyyy-MM-dd HH:mm:ss"))!}</td> -->
                                        <td class=" " style="width: 10%;word-break: break-all;">${(item.oCompleteTime?string("yyyy-MM-dd HH:mm:ss"))!}</td>

                                        <td style="width: 5%;word-break: break-all;"><a href="${base!}/admin/order/orderTotalDetail?orderTotalNo=${item.oOrderTotalNo!}">${item.oOrderTotalNo!}</a></td>
                                        <td style="width: 5%;word-break: break-all;">${item.oAmount!}</td>
                                        <td style="width: 10%;word-break: break-all;white-space:normal;">                 
                                        	<label>
                                        		<a href="${base!}/admin/order/detail?orderId=${item.orderId!}<#if item.oOrderType??><#if item.oOrderType=3>&type=3</#if></#if>">查看</a>
                                        	</label>
                                        </td>
                                    </tr>
                                    </#list>
                                    </tbody>
                                </table>
                            </div>
                            <div class="row">
                                <!--<div class="col-md-5 col-sm-12">-->
                                <!--</div>-->
                                <!--<div class="col-md-7 col-sm-12">-->
                                    <!--<div class="dataTables_paginate paging_bootstrap">-->
                                        <!--<ul class="pagination">-->
                                            <!--<li class="prev disabled"><a href="#" title="Previous"><i-->
                                                    <!--class="icon-angle-left"></i></a></li>-->
                                            <!--<li class="active"><a href="#">1</a></li>-->
                                            <!--<li><a href="#">2</a></li>-->
                                            <!--<li><a href="#">3</a></li>-->
                                            <!--<li><a href="#">4</a></li>-->
                                            <!--<li><a href="#">5</a></li>-->
                                            <!--<li class="next"><a href="#" title="Next"><i-->
                                                    <!--class="icon-angle-right"></i></a></li>-->
                                        <!--</ul>-->
                                    <!--</div>-->
                                <!--</div>-->

                                <div class="row">
                                    <#import "/ftl/pager.ftl" as p/> <#if page??> <@p.pager
                                    pageNo=pageNo pageSize=pageSize recordCount=recordCount
                                    pageCount=pageCount toURL="${base!}/admin/order/list"
                                    method="post"/> </#if>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END EXAMPLE TABLE PORTLET-->
            </div>
        </div>
    </div>
    <!-- END PAGE -->
</div>
<!-- END CONTAINER -->
<!-- BEGIN FOOTER -->
<#include "../common/footer.html"/>
<!-- END FOOTER -->
<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
<!-- BEGIN CORE PLUGINS -->
<!--[if lt IE 9]>

<!-- END CORE PLUGINS -->
<script>
	
</script>
<script>
    var first = true;
    jQuery(document).ready(function () {
        App.init();
        $("#layout").click(function(){
            if(first){
                layout();
                first = false;
            }else{
                resetLayout();
                first = true;
            }

        });
    });
	
    function searchs(){
    	     document.getElementById("form1").action="${base!}/admin/order/list";
    	   	 $("#form1").submit();
    }
    
    function layout() {
        $("body").addClass("page-boxed");

        // set header
        $('.header > .header-inner').addClass("container");
        var cont = $('body > .clearfix').after('<div class="container"></div>');

        // set content
        $('.page-container').appendTo('body > .container');

        // set footer
        $('.footer').html('<div class="container">' + $('.footer').html() + '</div>');
    }
    var resetLayout = function () {
        $("body").
        removeClass("page-boxed").
        removeClass("page-footer-fixed").
        removeClass("page-sidebar-fixed").
        removeClass("page-header-fixed");

        $('.header > .header-inner').removeClass("container");

        if ($('.page-container').parent(".container").size() === 1) {
            $('.page-container').insertAfter('body > .clearfix');
        }

        if ($('.footer > .container').size() === 1) {
            $('.footer').html($('.footer > .container').html());
        } else if ($('.footer').parent(".container").size() === 1) {
            $('.footer').insertAfter('.page-container');
        }

        $('body > .container').remove();
    }
    
</script>
<!-- END JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>